{% extends "WizinSimpleCmsBundle:Admin:base.html.twig" %}

{% block title %}WizinSimpleCmsBundle:Admin{% endblock %}

{% block body %}
    <a href="{{ path('wizin_simple_cms_admin_index') }}">Back</a>
    <hr/>
    <h1>Select template file</h1>
    <form id="wizin-simple-cms__select-template-file" action="{{ path('wizin_simple_cms_admin_add') }}" method="get">
        <select id="template-file">
            <option value="">select template file</option>
            {%- for templateFile in templateFiles -%}
                <option value="{{ templateFile }}">{{ templateFile }}</option>
            {%- endfor -%}
        </select>
        <input type="submit" />
    </form>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript">
        $("#wizin-simple-cms__select-template-file").submit(function(event) {
            var templateFile = $("#template-file").val();
            if (templateFile) {
                var currentUrl = window.location.href;
                if (currentUrl.slice(-1) === '/') {
                    currentUrl = currentUrl.slice(0, -1);
                }
                window.location.href = currentUrl + "/" + templateFile;
            }
            event.preventDefault();
        });
    </script>
{% endblock %}
